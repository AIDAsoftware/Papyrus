<link rel="import" href="bower_components/polymer/polymer.html">

<link rel="import" href="bower_components/paper-input/paper-input.html">
<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="bower_components/paper-input/paper-textarea.html">
<link rel="import" href="bower_components/iron-ajax/iron-ajax.html">

<dom-module id="document-creator">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>

    <paper-input label="Title" value={{title}}></paper-input>
    <paper-input label="Description" value="{{description}}"></paper-input>
    <paper-input label="Language" value="{{language}}"></paper-input>
    <paper-textarea label="Content"value="{{content}}"></paper-textarea>

    <iron-ajax id="ajax"
      url="http://192.168.1.193/Papyrus.Api/products/[[product_id]]/versions/[[version_id]]/documents"
      body='{"Title":"[[title]]", "Description":"[[description]]", "Content": "[[content]]", "Language": "[[language]]"}'
      handle-as="json"
      headers='{"Content-Type": "application/json;charset=utf-8"}'
      method="POST"
      on-response="handleResponse"
      debounce-duration="300"></iron-ajax>

  <paper-button onclick="submitForm()">Submit</paper-button>

  </template>
  <script>
    function submitForm() {
        document.querySelector('iron-ajax').generateRequest();
    }
    Polymer({
      is: 'document-creator',
      properties: {
        title: String,
        description: String,
        language: String,
        content: String,
        product_id: String,
        version_id: String
      }
    });
  </script>
</dom-module>
